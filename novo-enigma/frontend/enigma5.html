<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ExpoNigma</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="enigma.css" />
  <link rel="icon" type="image/png" href="../IMG/cadeado abrindo.png">

</head>
<body>
  <main class="container">
    <h1>ğŸ” Enigma 5</h1>
    <section class="card">
      <p class="enunciado">Sou o desejo que nunca se sacia. Quanto mais vocÃª tem, mais vocÃª quer. Quem sou eu?</p>

      <input id="resposta" type="text" placeholder="Digite sua resposta..." />

      <div class="actions">
        <button class="btn primary" onclick="verificar()">Tentar</button>
        <button class="btn ghost" onclick="mostrarDica()">Mostrar Dica</button>
      </div>

      <p id="mensagem" class="mensagem"></p>
      <p id="dica" class="dica" hidden>ğŸ’° Dica: estou presente quando o desejo por riqueza ultrapassa a razÃ£o.</p>
    </section>
  </main>

  <script>
    let tentativas = 3;
    let acertou = false;

    function normalizar(str) {
      return str.toLowerCase()
        .normalize('NFD')
        .replace(/[\u0300-\u036f]/g, '')
        .replace(/[^a-z\s]/gi, '')
        .trim();
    }

    function verificar() {
      if (acertou || tentativas <= 0) return;

      const input = document.getElementById('resposta');
      const msg = document.getElementById('mensagem');
      const valor = normalizar(input.value);

      if (!valor) {
        msg.textContent = 'Digite algo antes de tentar.';
        msg.className = 'mensagem bad';
        return;
      }

      if (valor === 'ganancia') {
        acertou = true;
        msg.textContent = 'âœ… VocÃª acertou!';
        msg.className = 'mensagem ok';
        input.disabled = true;
        return;
      }

      tentativas--;
      msg.textContent = `âŒ NÃ£o Ã© isso. VocÃª ainda tem ${tentativas} tentativa${tentativas === 1 ? '' : 's'}.`;
      msg.className = 'mensagem bad';

      if (tentativas === 0) {
        input.disabled = true;
        msg.textContent = 'ğŸ’€ VocÃª perdeu. ';
        document.body.classList.add('derrota');
        criarAnimacaoDerrota();
      }
    }

    function mostrarDica() {
      document.getElementById('dica').hidden = false;
    }

    function criarAnimacaoDerrota() {
      const tela = document.createElement('div');
      tela.className = 'overlay-derrota';
      tela.innerHTML = `<p class="texto-derrota">â˜ ï¸ VocÃª perdeu o enigma</p>`;
      document.body.appendChild(tela);
    }
  </script>
</body>
</html>